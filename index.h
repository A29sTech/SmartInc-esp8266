const char HOME_PAGE[] PROGMEM = "<!DOCTYPE html> <html> <head> <meta name='viewport' content='width=device-width, initial-scale=1.0'> <title> SmartEnc-A29 </title> </head> <body> <h2 style='font-weight: bolder; color: green;margin: auto;display: block;'> Smart Incubator by <span style=\"color: darkgreen; text-shadow: 2px 2px 5px lightgreen;\"> A29sTech </span> </h2> <hr/> <div class='feild'> DSB Temprature : <b class='val' id='temp'> Getting... </b></div> <div class='feild'> DHT Temprature : <b class='val' id='dhtemp'> Getting... </b></div> <div class='feild'> DHT Humidity : <b class='val' id='dhthum'> Getting... </b></div> <br> </body> <input class='inp' type='text' placeholder='Enter A Float Value' id='MinVal' autocomplete='off' /> <br/> <select class='inp' id='relay'> <option value='0'> Max Temprature </option> <option value='1'> Max Difference </option> <option value='2'> Min Difference </option> <option value='3'> Difference Relay 1 </option> <option value='4'> Difference Relay 2 </option> </select> <br/> <span style='border: none;' class='inp' id='cval'> Getting... </span> <br/> <button class='btn' id='btn'> Save </button> <style> .feild { display: block; text-align: right; font-size: 1.2rem; font-style: italic; margin-right: 10%; } .val { color: red; } .btn { float: right; margin-right: 10%; color: black; background-color: white; font-size: 110%; border-radius: 12px; box-shadow: 2px 2px 10px black; } .inp { text-align: center; display: block; margin: auto; border: none; border-bottom: 1px solid black; width:80% } </style> <script> document.getElementById('btn').addEventListener('click', ()=>{ let inputBox = parseFloat(document.getElementById('MinVal').value); let relaySelect = document.getElementById('relay').value; if ( inputBox > 0.0 && inputBox < 100.00 ) { fetch(`/setconf?${ relaySelect }=${ inputBox }`).then(res => { return res.text(); }).then(text => { alert(text); }).catch(console.log); } else { alert('Enter A Valid Value'); } }); const geTH = ()=>{ fetch('/geth').then(res=>res.text()) .then(res=>JSON.parse(res)) .then((json_res) => { document.getElementById('temp').innerText = json_res.temprature; document.getElementById('dhtemp').innerText = json_res.temp; document.getElementById('dhthum').innerText = json_res.hum; setTimeout(()=>{ requestAnimationFrame(geTH); }, 2000); }); }; geTH(); fetch('/getconf') .then(res=>res.text()) .then(res=>JSON.parse(res)) .then((json_res) => { let cval_ele = document.getElementById('cval'); cval_ele.innerText = json_res.max_temp; let select_ele = document.getElementById('relay'); select_ele.addEventListener('change', ()=>{ switch(select_ele.value){ case '0': cval_ele.innerText = json_res.max_temp; break; case '1': cval_ele.innerText = json_res.max_diff; break; case '2': cval_ele.innerText = json_res.min_diff; break; case '3': cval_ele.innerText = json_res.diff_r1; break; case '4': cval_ele.innerText = json_res.diff_r2; break; default: alert('What ?'); } }); }); </script> </html>";
